<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                                       http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.5.xsd">

    <changeSet id="create-tenant-table" author="kasia">
        <sql dbms="hsqldb" splitStatements="true" stripComments="true">
            <![CDATA[
                CREATE TABLE IF NOT EXISTS tenant (
                    id BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1),
                    full_name VARCHAR(255) NOT NULL
                );
            ]]>
        </sql>
    </changeSet>

    <changeSet id="create-landlord-table" author="kasia">
        <sql dbms="hsqldb" splitStatements="true" stripComments="true">
            <![CDATA[
                CREATE TABLE IF NOT EXISTS landlord (
                    id BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1),
                    full_name VARCHAR(255) NOT NULL
                );
            ]]>
        </sql>
    </changeSet>

    <changeSet id="create-apartment-table" author="kasia">
        <sql dbms="hsqldb" splitStatements="true" stripComments="true">
            <![CDATA[
            CREATE TABLE IF NOT EXISTS apartment (
                id BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1),
                name VARCHAR(255) NOT NULL,
                price DECIMAL(10,2) NOT NULL,
                area DECIMAL(10,2) NOT NULL,
                description VARCHAR(1000) NOT NULL,
                landlord_id BIGINT NOT NULL);

        ]]>
        </sql>
    </changeSet>

    <changeSet id="create-booking-table" author="kasia">
        <sql dbms="hsqldb" splitStatements="true" stripComments="true">
            <![CDATA[
            CREATE TABLE IF NOT EXISTS booking (
                id BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1),
                start_date DATE NOT NULL,
                end_date DATE NOT NULL,
                landlord_id BIGINT NOT NULL,
                tenant_id BIGINT NOT NULL,
                apartment_id BIGINT NOT NULL,
                price DECIMAL(10,2) NOT NULL,
                CONSTRAINT fk_booking_landlord FOREIGN KEY (landlord_id) REFERENCES landlord(id),
                CONSTRAINT fk_booking_tenant FOREIGN KEY (tenant_id) REFERENCES tenant(id),
                CONSTRAINT fk_booking_apartment FOREIGN KEY (apartment_id) REFERENCES apartment(id)
            );
        ]]>
        </sql>
    </changeSet>


</databaseChangeLog>